@model SmartGuardPortalv1.Models.Place

@{
    ViewBag.Title = "Create";
    int userId = (int)WebSecurity.CurrentUserId;
}
<style>
  #map {
    width: 500px;
    height: 400px;
    background-color: #CCC;
  }
</style>
<script src="https://maps.googleapis.com/maps/api/js"></script>
    <script>
      var marker, map;
      function initialize() {
        var mapCanvas = document.getElementById('map');
        var mapOptions = {
          center: new google.maps.LatLng(44.5403, -78.5463),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        map = new google.maps.Map(mapCanvas, mapOptions);
        marker = new google.maps.Marker({ position: map.getCenter(), map: map });
        var lat = document.getElementById("PlaceLat");
        var lng = document.getElementById("PlaceLong");
        
        google.maps.event.addListener(map, 'click', function (event) {
            alert("Latitude: " + event.latLng.lat() + " " + ", longitude: " + event.latLng.lng());
            lat.value = event.latLng.lat();
            lng.value = event.latLng.lng();
            marker.setPosition(event.latLng);

        });
        

        
      }
      google.maps.event.addDomListener(window, 'load', initialize);
      
</script>

<b>Create a new Place</b>
<br />
<table>
    <tr>
        <td>
            <div id="map"></div>
            <!--<iframe id="preview" src="https://www.google.com/maps/embed/v1/view?key=AIzaSyClGFiboSom1LT8N4QMT2TlbXXh4-TyFLI&center=-33.9,151.2&zoom=12" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe> -->
        </td>
        <td>
            @using (Html.BeginForm()) 
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true)

                <fieldset>
                    <legend>Feature</legend>

                    <div class="editor-label">
                        @Html.LabelFor(model => model.PlaceLat)
                    </div>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.PlaceLat)
                        @Html.ValidationMessageFor(model => model.PlaceLat)
                    </div>
                    <div class="editor-label">
                        @Html.LabelFor(model => model.PlaceLong)
                    </div>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.PlaceLong)
                        @Html.ValidationMessageFor(model => model.PlaceLong)
                    </div>
                    <div class="editor-label">
                        @Html.LabelFor(model => model.PlaceName)
                    </div>
                    <div class="editor-field">
                        @Html.EditorFor(model => model.PlaceName)
                        @Html.ValidationMessageFor(model => model.PlaceName)
                    </div>
        

        
                    <input type="hidden" value="@userId" id="fkUserId" name="fkUserId"/>
                    <p>
                        <input type="submit" value="Create" />
                    </p>
                </fieldset>
            }

            <div>
                @Html.ActionLink("Back to List", "Index")
            </div>

        </td>
    </tr>
</table>




@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
