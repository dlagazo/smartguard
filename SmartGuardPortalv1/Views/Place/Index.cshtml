@model IEnumerable<SmartGuardPortalv1.Models.Place>

@{
    ViewBag.Title = "Index";
    int userId = (int)WebSecurity.CurrentUserId;
    
}

<b>@Html.ActionLink("Dashboard", "Modules", "Home") > My Places</b>

<p>
    @Html.ActionLink("Create a new place", "Create")
</p>
<table>
    
@foreach (var item in Model.Where(i => i.fkUserId == userId)) {
    string marker = item.PlaceLat + "," + item.PlaceLong;
    <tr>
        
        <td>
            <b>@item.PlaceName</b> 
            @Html.ActionLink("Edit", "Edit", new { id=item.PlaceId }) |
            @* Html.ActionLink("Details", "Details", new { id=item.PlaceId }) | *@
            @{
                if(item.PlaceName != "Home")
                {
                    @Html.ActionLink("Delete", "Delete", new { id=item.PlaceId })
                }
            }
            <br />
            <img src="https://maps.googleapis.com/maps/api/staticmap?center=@item.PlaceLat,@item.PlaceLong&zoom=16&size=600x300&maptype=roadmap
&markers=color:red%7Clabel:P%7C @marker&key=AIzaSyClGFiboSom1LT8N4QMT2TlbXXh4-TyFLI" />
        </td>
        
        <td>
            
        </td>
    </tr>
}

</table>
