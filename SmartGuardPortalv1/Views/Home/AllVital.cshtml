@{
    
}
<b> @Html.ActionLink("Main Menu", "AllModules", "Home") > Records </b>
<br /><br />
@*Html.ActionLink("Home","Welcome","Home") > My Modules</b>*@

<div>

   
    <table width="100%">
    @{
        
        if(Roles.IsUserInRole("Contact"))
        {
            SmartGuardPortalv1.Models.UsersContext db = new SmartGuardPortalv1.Models.UsersContext();
        
            String contactEmail = db.UserProfiles.Find(WebSecurity.CurrentUserId).Email;
        
            foreach(SmartGuardPortalv1.Models.Contact contact in db.Contacts.Where(i => i.Email == contactEmail))
            {
                SmartGuardPortalv1.Models.UserProfile user = db.UserProfiles.Find(contact.fkUserId);
                
                <tr>
                    <td>
                        <div align="center">
                            <b> @user.FirstName @user.LastName 's Record </b>
                        </div>
                        
                        @foreach(SmartGuardPortalv1.Models.VitalInfo vitals in db.VitalInfos.Where(i => i.fkUserId == contact.fkUserId))
                        {
                            
                            <text>@vitals.Title : @vitals.Value</text>
                            <br />
                            
                        }
                        
                        
                        

                    </td>
                    
                </tr>
                
            }
        
        }
    }
    </table>

</div>